<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö StudentFocus - Ultimate Study Manager</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { font-family: 'Poppins', sans-serif; }
        :root {
            --primary: #6C63FF;
            --secondary: #4ECDC4;
            --accent: #00d4aa;
            --gradient: linear-gradient(135deg, #6C63FF 0%, #4ECDC4 100%);
            --gradient-2: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-3: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --glow: 0 0 40px rgba(108, 99, 255, 0.3);
        }
        
        .gradient-bg { background: var(--gradient); }
        .gradient-text { background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .gradient-border { border: 2px solid transparent; background: linear-gradient(var(--card), var(--card)) padding-box, var(--gradient) border-box; }
        
        /* Dark Mode */
        .dark { --bg: #0a0e1a; --card: #141b2d; --card-hover: #1a2332; --text: #f1f5f9; --text-muted: #94a3b8; --border: #1e293b; }
        .light { --bg: #f8fafc; --card: #ffffff; --card-hover: #f1f5f9; --text: #1e293b; --text-muted: #64748b; --border: #e2e8f0; }
        
        body { background: var(--bg); color: var(--text); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); overflow-x: hidden; }
        .card { background: var(--card); border: 1px solid var(--border); transition: all 0.3s ease; }
        .card:hover { background: var(--card-hover); transform: translateY(-2px); box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        
        /* ==================== ANIMATIONS ==================== */
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(30px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        @keyframes fadeInLeft { 
            from { opacity: 0; transform: translateX(-50px); } 
            to { opacity: 1; transform: translateX(0); } 
        }
        @keyframes fadeInRight { 
            from { opacity: 0; transform: translateX(50px); } 
            to { opacity: 1; transform: translateX(0); } 
        }
        @keyframes fadeInUp { 
            from { opacity: 0; transform: translateY(50px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        @keyframes fadeInDown { 
            from { opacity: 0; transform: translateY(-50px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        @keyframes scaleIn { 
            from { opacity: 0; transform: scale(0.8); } 
            to { opacity: 1; transform: scale(1); } 
        }
        @keyframes pulse { 
            0%, 100% { transform: scale(1); } 
            50% { transform: scale(1.05); } 
        }
        @keyframes shake { 
            0%, 100% { transform: translateX(0); } 
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); } 
            20%, 40%, 60%, 80% { transform: translateX(5px); } 
        }
        @keyframes bounce { 
            0%, 100% { transform: translateY(0); } 
            50% { transform: translateY(-10px); } 
        }
        @keyframes float { 
            0%, 100% { transform: translateY(0px) rotate(0deg); } 
            25% { transform: translateY(-10px) rotate(2deg); } 
            50% { transform: translateY(-5px) rotate(0deg); } 
            75% { transform: translateY(-15px) rotate(-2deg); } 
        }
        @keyframes glow { 
            0%, 100% { box-shadow: 0 0 20px rgba(108, 99, 255, 0.3); } 
            50% { box-shadow: 0 0 40px rgba(108, 99, 255, 0.6), 0 0 60px rgba(78, 205, 196, 0.3); } 
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        @keyframes rotate { 
            from { transform: rotate(0deg); } 
            to { transform: rotate(360deg); } 
        }
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        @keyframes blink {
            50% { border-color: transparent; }
        }
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(100px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes ripple {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(4); opacity: 0; }
        }
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-500px) rotate(720deg); opacity: 0; }
        }
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            14% { transform: scale(1.1); }
            28% { transform: scale(1); }
            42% { transform: scale(1.1); }
            70% { transform: scale(1); }
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .animate-fade { animation: fadeIn 0.6s ease-out forwards; }
        .animate-fade-left { animation: fadeInLeft 0.6s ease-out forwards; }
        .animate-fade-right { animation: fadeInRight 0.6s ease-out forwards; }
        .animate-fade-up { animation: fadeInUp 0.6s ease-out forwards; }
        .animate-fade-down { animation: fadeInDown 0.6s ease-out forwards; }
        .animate-scale { animation: scaleIn 0.5s ease-out forwards; }
        .animate-pulse-custom { animation: pulse 2s infinite; }
        .animate-shake { animation: shake 0.6s ease; }
        .animate-bounce { animation: bounce 1s infinite; }
        .animate-float { animation: float 6s ease-in-out infinite; }
        .animate-glow { animation: glow 2s ease-in-out infinite; }
        .animate-rotate { animation: rotate 20s linear infinite; }
        .animate-heartbeat { animation: heartbeat 1.5s ease-in-out infinite; }
        
        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
        .delay-400 { animation-delay: 0.4s; }
        .delay-500 { animation-delay: 0.5s; }
        .delay-600 { animation-delay: 0.6s; }
        
        /* Shimmer Effect */
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        
        /* Gradient Animation */
        .animated-gradient {
            background: linear-gradient(-45deg, #6C63FF, #4ECDC4, #667eea, #764ba2);
            background-size: 400% 400%;
            animation: gradientShift 10s ease infinite;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: var(--gradient); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary); }
        
        /* Toast */
        .toast { 
            position: fixed; bottom: 20px; right: 20px; padding: 16px 28px; 
            border-radius: 16px; z-index: 9999; animation: slideInUp 0.4s ease;
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1);
            display: flex; align-items: center; gap: 12px; font-weight: 500;
        }
        .toast.hiding { animation: fadeInUp 0.3s ease reverse forwards; }
        
        /* Focus Mode Overlay */
        .focus-overlay { 
            position: fixed; inset: 0; background: radial-gradient(ellipse at center, #0a0e1a 0%, #000 100%); 
            z-index: 1000; display: none; flex-direction: column; align-items: center; justify-content: center; 
        }
        .focus-overlay.active { display: flex; animation: fadeIn 0.5s ease; }
        .focus-overlay::before {
            content: ''; position: absolute; inset: 0;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3z' fill='%236C63FF' fill-opacity='0.03'/%3E%3C/svg%3E");
            opacity: 0.5;
        }
        
        /* Priority Colors */
        .priority-high { border-left: 4px solid #ef4444; background: linear-gradient(90deg, rgba(239,68,68,0.1) 0%, transparent 100%); }
        .priority-medium { border-left: 4px solid #f59e0b; background: linear-gradient(90deg, rgba(245,158,11,0.1) 0%, transparent 100%); }
        .priority-low { border-left: 4px solid #22c55e; background: linear-gradient(90deg, rgba(34,197,94,0.1) 0%, transparent 100%); }
        
        /* Note Colors */
        .note-yellow { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); }
        .note-green { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); }
        .note-blue { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); }
        .note-pink { background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%); }
        .note-purple { background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%); }
        
        /* Tab Active */
        .tab-btn { position: relative; overflow: hidden; }
        .tab-btn::before { content: ''; position: absolute; bottom: 0; left: 50%; width: 0; height: 3px; background: var(--gradient); transition: all 0.3s; transform: translateX(-50%); border-radius: 3px; }
        .tab-btn:hover::before { width: 50%; }
        .tab-btn.active { background: var(--gradient); color: white; }
        .tab-btn.active::before { display: none; }
        
        /* Modal */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); z-index: 500; display: none; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { animation: scaleIn 0.4s ease; }
        
        /* Progress Ring */
        .progress-ring { transform: rotate(-90deg); filter: drop-shadow(0 0 10px rgba(108, 99, 255, 0.5)); }
        .progress-ring circle { transition: stroke-dashoffset 0.5s ease; }
        
        /* Chart */
        .bar { transition: height 0.8s cubic-bezier(0.4, 0, 0.2, 1); position: relative; }
        .bar::after { content: attr(data-value); position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 12px; opacity: 0; transition: opacity 0.3s; }
        .bar:hover::after { opacity: 1; }
        
        /* Achievement Badge */
        .achievement { opacity: 0.4; filter: grayscale(1); transition: all 0.4s ease; }
        .achievement.unlocked { opacity: 1; filter: none; }
        .achievement.unlocked:hover { transform: scale(1.05) rotate(2deg); }
        .achievement.unlocked .achievement-icon { animation: bounce 0.6s ease; }
        
        /* Buttons */
        .btn-primary { 
            background: var(--gradient); color: white; transition: all 0.3s; 
            position: relative; overflow: hidden; 
        }
        .btn-primary::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        .btn-primary:hover::before { left: 100%; }
        .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 15px 40px rgba(108,99,255,0.4); }
        .btn-primary:active { transform: translateY(-1px); }
        
        .btn-secondary {
            background: transparent; border: 2px solid var(--border); color: var(--text);
            transition: all 0.3s;
        }
        .btn-secondary:hover { border-color: var(--primary); background: rgba(108,99,255,0.1); }
        
        /* Input Focus */
        input, select, textarea { transition: all 0.3s ease; }
        input:focus, select:focus, textarea:focus { 
            outline: none; border-color: var(--primary); 
            box-shadow: 0 0 0 4px rgba(108,99,255,0.15), 0 0 20px rgba(108,99,255,0.1); 
        }
        
        /* Landing Hero */
        .hero-pattern { 
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%236C63FF' fill-opacity='0.06'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"); 
            position: relative;
        }
        .hero-pattern::before {
            content: ''; position: absolute; inset: 0;
            background: radial-gradient(ellipse at top, rgba(108,99,255,0.15) 0%, transparent 70%);
        }
        
        /* Floating Elements */
        .floating-shape {
            position: absolute; border-radius: 50%; opacity: 0.1;
            background: var(--gradient); filter: blur(40px);
        }
        
        /* Feature Card Hover */
        .feature-card {
            position: relative; overflow: hidden;
        }
        .feature-card::before {
            content: ''; position: absolute; inset: 0;
            background: var(--gradient); opacity: 0; transition: opacity 0.3s;
        }
        .feature-card:hover::before { opacity: 0.05; }
        .feature-card:hover .feature-icon { transform: scale(1.1) rotate(5deg); }
        .feature-icon { transition: transform 0.3s ease; }
        
        /* Stats Counter */
        .stat-number {
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Pomodoro Mode Buttons */
        .pomo-mode-btn { transition: all 0.3s ease; }
        .pomo-mode-btn.active { background: var(--gradient); color: white; box-shadow: 0 5px 20px rgba(108,99,255,0.3); }
        
        /* Sound Buttons */
        .sound-btn { transition: all 0.3s ease; }
        .sound-btn.active { border-color: var(--primary) !important; background: rgba(108,99,255,0.1); transform: scale(1.05); }
        .sound-btn:hover { transform: translateY(-3px); }
        
        /* Task Checkbox */
        .task-checkbox {
            position: relative; cursor: pointer;
            transition: all 0.3s ease;
        }
        .task-checkbox:hover { transform: scale(1.1); }
        .task-checkbox.completed::after {
            content: ''; position: absolute; inset: -5px;
            border-radius: 50%; background: rgba(34,197,94,0.2);
            animation: ripple 0.6s ease-out;
        }
        
        /* Confetti */
        .confetti-piece {
            position: fixed; width: 10px; height: 10px;
            animation: confetti 1s ease-out forwards;
        }
        
        /* Keyboard Shortcut Badge */
        .kbd {
            display: inline-flex; align-items: center; padding: 2px 8px;
            background: var(--border); border-radius: 6px; font-size: 12px;
            font-family: monospace; border: 1px solid var(--border);
        }
        
        /* Loading Spinner */
        .spinner {
            width: 40px; height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: rotate 0.8s linear infinite;
        }
        
        /* Tooltip */
        .tooltip {
            position: relative;
        }
        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%) translateY(10px);
            padding: 8px 12px; background: var(--card); border: 1px solid var(--border);
            border-radius: 8px; font-size: 12px; white-space: nowrap;
            opacity: 0; visibility: hidden; transition: all 0.3s;
            pointer-events: none; z-index: 100;
        }
        .tooltip:hover::after { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(-5px); }
        
        /* Glassmorphism */
        .glass {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        /* Badge */
        .badge {
            display: inline-flex; align-items: center; gap: 4px;
            padding: 4px 10px; border-radius: 20px; font-size: 12px; font-weight: 500;
        }
        .badge-primary { background: rgba(108,99,255,0.2); color: #a5a0ff; }
        .badge-success { background: rgba(34,197,94,0.2); color: #4ade80; }
        .badge-warning { background: rgba(245,158,11,0.2); color: #fbbf24; }
        .badge-danger { background: rgba(239,68,68,0.2); color: #f87171; }
        
        /* Progress Bar Animated */
        .progress-animated {
            position: relative; overflow: hidden;
        }
        .progress-animated::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        /* Timer Pulse */
        .timer-pulse {
            position: relative;
        }
        .timer-pulse::before {
            content: ''; position: absolute; inset: -10px;
            border-radius: 50%; border: 2px solid var(--primary);
            opacity: 0;
        }
        .timer-pulse.running::before {
            animation: pulse 1.5s ease-in-out infinite;
            opacity: 0.5;
        }
        
        /* Custom Selection */
        ::selection {
            background: rgba(108,99,255,0.3);
            color: white;
        }
        
        /* Smooth Scroll */
        html { scroll-behavior: smooth; }
        
        /* Empty State */
        .empty-state {
            animation: fadeIn 0.6s ease;
        }
        .empty-state-icon {
            animation: float 4s ease-in-out infinite;
        }
    </style>
</head>
<body class="dark min-h-screen">
    <!-- Floating Background Shapes -->
    <div class="floating-shape w-96 h-96 -top-48 -left-48 fixed" style="animation: float 8s ease-in-out infinite;"></div>
    <div class="floating-shape w-64 h-64 top-1/2 -right-32 fixed" style="animation: float 10s ease-in-out infinite reverse;"></div>
    <div class="floating-shape w-80 h-80 -bottom-40 left-1/4 fixed" style="animation: float 12s ease-in-out infinite;"></div>

    <!-- ==================== LANDING PAGE ==================== -->
    <div id="landing-page" class="min-h-screen relative z-10">
        <!-- Navbar -->
        <nav class="fixed top-0 w-full z-50 glass">
            <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
                <div class="flex items-center gap-3 animate-fade-left">
                    <span class="text-3xl animate-bounce">üìö</span>
                    <span class="text-xl font-bold gradient-text">StudentFocus</span>
                    <span class="badge badge-primary hidden sm:inline-flex">v2.0</span>
                </div>
                <div class="flex items-center gap-4 animate-fade-right">
                    <button onclick="toggleTheme()" class="p-3 rounded-xl hover:bg-white/10 transition tooltip" data-tooltip="Toggle Theme">
                        <i class="fas fa-moon text-xl" id="theme-icon"></i>
                    </button>
                    <a href="#features" class="hidden md:block px-4 py-2 rounded-lg hover:bg-white/10 transition">Features</a>
                    <a href="https://github.com/SudhirDevOps1/studentfocus" target="_blank" class="btn-primary px-5 py-2.5 rounded-xl font-medium flex items-center gap-2">
                        <i class="fab fa-github"></i> <span class="hidden sm:inline">GitHub</span>
                    </a>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="pt-32 pb-24 px-4 hero-pattern min-h-screen flex items-center">
            <div class="max-w-6xl mx-auto text-center relative z-10">
                <!-- Badges -->
                <div class="flex flex-wrap justify-center gap-3 mb-8 animate-fade-down">
                    <span class="badge badge-primary"><i class="fas fa-star mr-1"></i> Ultimate Study Manager</span>
                    <span class="badge badge-success"><i class="fas fa-check mr-1"></i> 100% Free</span>
                    <span class="badge badge-warning"><i class="fas fa-fire mr-1"></i> New Features</span>
                </div>
                
                <h1 class="text-5xl md:text-7xl lg:text-8xl font-black mb-8 animate-fade">
                    Master Your <br>
                    <span class="gradient-text animate-pulse-custom">Studies</span> Like a Pro
                </h1>
                
                <p class="text-xl md:text-2xl text-gray-400 mb-10 max-w-3xl mx-auto animate-fade delay-200" style="opacity: 0;">
                    Track tasks, manage time with Pomodoro, calculate grades, earn achievements, 
                    and boost your productivity with the ultimate study companion.
                </p>
                
                <div class="flex flex-col sm:flex-row gap-4 justify-center animate-fade delay-300" style="opacity: 0;">
                    <button onclick="showApp()" class="btn-primary px-10 py-5 rounded-2xl font-bold text-lg flex items-center gap-3 justify-center group">
                        <i class="fas fa-rocket group-hover:animate-bounce"></i> 
                        Explore App
                        <i class="fas fa-arrow-right transition-transform group-hover:translate-x-2"></i>
                    </button>
                    <a href="https://github.com/SudhirDevOps1/studentfocus" target="_blank" class="btn-secondary px-10 py-5 rounded-2xl font-bold text-lg flex items-center gap-3 justify-center">
                        <i class="fab fa-github"></i> View on GitHub
                    </a>
                </div>
                
                <!-- Quick Stats -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-20 max-w-4xl mx-auto">
                    <div class="card p-6 rounded-2xl animate-fade delay-100" style="opacity: 0;">
                        <div class="text-4xl font-black stat-number mb-1">16+</div>
                        <div class="text-gray-400 text-sm">Achievements</div>
                    </div>
                    <div class="card p-6 rounded-2xl animate-fade delay-200" style="opacity: 0;">
                        <div class="text-4xl font-black stat-number mb-1">7</div>
                        <div class="text-gray-400 text-sm">Core Features</div>
                    </div>
                    <div class="card p-6 rounded-2xl animate-fade delay-300" style="opacity: 0;">
                        <div class="text-4xl font-black stat-number mb-1">4</div>
                        <div class="text-gray-400 text-sm">Ambient Sounds</div>
                    </div>
                    <div class="card p-6 rounded-2xl animate-fade delay-400" style="opacity: 0;">
                        <div class="text-4xl font-black stat-number mb-1">‚àû</div>
                        <div class="text-gray-400 text-sm">Possibilities</div>
                    </div>
                </div>
                
                <!-- Scroll Indicator -->
                <div class="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce hidden md:block">
                    <a href="#features" class="text-gray-400 hover:text-white transition">
                        <i class="fas fa-chevron-down text-2xl"></i>
                    </a>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="py-24 px-4 relative">
            <div class="max-w-6xl mx-auto">
                <div class="text-center mb-16">
                    <span class="badge badge-primary mb-4">‚ú® Features</span>
                    <h2 class="text-4xl md:text-5xl font-bold mb-4">
                        Packed with <span class="gradient-text">Powerful</span> Features
                    </h2>
                    <p class="text-gray-400 text-lg max-w-2xl mx-auto">
                        Everything you need to supercharge your study sessions and achieve academic excellence.
                    </p>
                </div>
                
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Task Management -->
                    <div class="feature-card card p-8 rounded-3xl cursor-pointer group">
                        <div class="feature-icon w-16 h-16 rounded-2xl gradient-bg flex items-center justify-center text-3xl mb-6">üìã</div>
                        <h3 class="text-xl font-bold mb-3 group-hover:text-purple-400 transition">Task Management</h3>
                        <p class="text-gray-400 mb-4">Organize your academic life with powerful task tracking.</p>
                        <ul class="text-sm text-gray-500 space-y-2">
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Priority levels (High/Medium/Low)</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Categories & due dates</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Search, filter & sort</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>CSV export</li>
                        </ul>
                    </div>
                    
                    <!-- Pomodoro Timer -->
                    <div class="feature-card card p-8 rounded-3xl cursor-pointer group">
                        <div class="feature-icon w-16 h-16 rounded-2xl gradient-bg flex items-center justify-center text-3xl mb-6">üçÖ</div>
                        <h3 class="text-xl font-bold mb-3 group-hover:text-purple-400 transition">Pomodoro Timer</h3>
                        <p class="text-gray-400 mb-4">Stay focused with customizable study sessions.</p>
                        <ul class="text-sm text-gray-500 space-y-2">
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Customizable durations</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Auto break switching</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>4 ambient sounds</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Focus mode overlay</li>
                        </ul>
                    </div>
                    
                    <!-- Grade Tracker -->
                    <div class="feature-card card p-8 rounded-3xl cursor-pointer group">
                        <div class="feature-icon w-16 h-16 rounded-2xl gradient-bg flex items-center justify-center text-3xl mb-6">üìä</div>
                        <h3 class="text-xl font-bold mb-3 group-hover:text-purple-400 transition">Grade Tracker</h3>
                        <p class="text-gray-400 mb-4">Track your academic performance with precision.</p>
                        <ul class="text-sm text-gray-500 space-y-2">
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Credit-weighted GPA</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>4.0 scale calculation</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Letter grade display</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Multiple grade types</li>
                        </ul>
                    </div>
                    
                    <!-- Study Analytics -->
                    <div class="feature-card card p-8 rounded-3xl cursor-pointer group">
                        <div class="feature-icon w-16 h-16 rounded-2xl gradient-bg flex items-center justify-center text-3xl mb-6">üìà</div>
                        <h3 class="text-xl font-bold mb-3 group-hover:text-purple-400 transition">Study Analytics</h3>
                        <p class="text-gray-400 mb-4">Visualize your study habits and progress.</p>
                        <ul class="text-sm text-gray-500 space-y-2">
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Daily study tracking</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Weekly progress chart</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Streak tracking</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Daily goals</li>
                        </ul>
                    </div>
                    
                    <!-- Achievements -->
                    <div class="feature-card card p-8 rounded-3xl cursor-pointer group">
                        <div class="feature-icon w-16 h-16 rounded-2xl gradient-bg flex items-center justify-center text-3xl mb-6">üèÜ</div>
                        <h3 class="text-xl font-bold mb-3 group-hover:text-purple-400 transition">Achievements</h3>
                        <p class="text-gray-400 mb-4">Gamify your learning with unlockable badges.</p>
                        <ul class="text-sm text-gray-500 space-y-2">
                            <li><i class="fas fa-check text-green-500 mr-2"></i>16+ achievements</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Streak badges</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Milestone rewards</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Special badges</li>
                        </ul>
                    </div>
                    
                    <!-- Quick Notes -->
                    <div class="feature-card card p-8 rounded-3xl cursor-pointer group">
                        <div class="feature-icon w-16 h-16 rounded-2xl gradient-bg flex items-center justify-center text-3xl mb-6">üìù</div>
                        <h3 class="text-xl font-bold mb-3 group-hover:text-purple-400 transition">Quick Notes</h3>
                        <p class="text-gray-400 mb-4">Capture thoughts instantly with colorful notes.</p>
                        <ul class="text-sm text-gray-500 space-y-2">
                            <li><i class="fas fa-check text-green-500 mr-2"></i>5 color options</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Grid view layout</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Quick create</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Easy organization</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Keyboard Shortcuts Section -->
        <section class="py-20 px-4">
            <div class="max-w-4xl mx-auto">
                <div class="card p-10 rounded-3xl text-center">
                    <span class="badge badge-primary mb-4">‚å®Ô∏è Keyboard Shortcuts</span>
                    <h2 class="text-3xl font-bold mb-8">Work Faster with Shortcuts</h2>
                    <div class="flex flex-wrap justify-center gap-6">
                        <div class="flex items-center gap-3 p-4 rounded-xl bg-white/5">
                            <span class="kbd">Ctrl</span>
                            <span class="text-gray-400">+</span>
                            <span class="kbd">N</span>
                            <span class="text-gray-400 ml-2">New Task</span>
                        </div>
                        <div class="flex items-center gap-3 p-4 rounded-xl bg-white/5">
                            <span class="kbd">Esc</span>
                            <span class="text-gray-400 ml-2">Close Modal</span>
                        </div>
                        <div class="flex items-center gap-3 p-4 rounded-xl bg-white/5">
                            <span class="kbd">Space</span>
                            <span class="text-gray-400 ml-2">Toggle Timer</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Achievement Preview -->
        <section class="py-20 px-4">
            <div class="max-w-6xl mx-auto">
                <div class="text-center mb-12">
                    <span class="badge badge-warning mb-4">üèÜ Gamification</span>
                    <h2 class="text-4xl font-bold mb-4">Unlock <span class="gradient-text">Achievements</span></h2>
                    <p class="text-gray-400">Complete milestones and earn badges to stay motivated!</p>
                </div>
                
                <div class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-8 gap-4">
                    <div class="card p-4 rounded-2xl text-center">
                        <div class="text-3xl mb-2">üéØ</div>
                        <div class="text-xs text-gray-400">First Step</div>
                    </div>
                    <div class="card p-4 rounded-2xl text-center">
                        <div class="text-3xl mb-2">üìã</div>
                        <div class="text-xs text-gray-400">Task Master</div>
                    </div>
                    <div class="card p-4 rounded-2xl text-center">
                        <div class="text-3xl mb-2">üèÜ</div>
                        <div class="text-xs text-gray-400">Task Legend</div>
                    </div>
                    <div class="card p-4 rounded-2xl text-center">
                        <div class="text-3xl mb-2">üçÖ</div>
                        <div class="text-xs text-gray-400">Pomodoro</div>
                    </div>
                    <div class="card p-4 rounded-2xl text-center">
                        <div class="text-3xl mb-2">üî•</div>
                        <div class="text-xs text-gray-400">On Fire</div>
                    </div>
                    <div class="card p-4 rounded-2xl text-center">
                        <div class="text-3xl mb-2">üí™</div>
                        <div class="text-xs text-gray-400">Warrior</div>
                    </div>
                    <div class="card p-4 rounded-2xl text-center">
                        <div class="text-3xl mb-2">üåÖ</div>
                        <div class="text-xs text-gray-400">Early Bird</div>
                    </div>
                    <div class="card p-4 rounded-2xl text-center">
                        <div class="text-3xl mb-2">ü¶â</div>
                        <div class="text-xs text-gray-400">Night Owl</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tech Stack -->
        <section class="py-20 px-4">
            <div class="max-w-4xl mx-auto text-center">
                <span class="badge badge-primary mb-4">üõ†Ô∏è Built With</span>
                <h2 class="text-3xl font-bold mb-8">Modern Tech Stack</h2>
                <div class="flex flex-wrap justify-center gap-4">
                    <div class="card px-6 py-4 rounded-xl flex items-center gap-3">
                        <i class="fab fa-html5 text-orange-500 text-2xl"></i>
                        <span>HTML5</span>
                    </div>
                    <div class="card px-6 py-4 rounded-xl flex items-center gap-3">
                        <i class="fab fa-css3-alt text-blue-500 text-2xl"></i>
                        <span>CSS3</span>
                    </div>
                    <div class="card px-6 py-4 rounded-xl flex items-center gap-3">
                        <i class="fab fa-js text-yellow-400 text-2xl"></i>
                        <span>JavaScript</span>
                    </div>
                    <div class="card px-6 py-4 rounded-xl flex items-center gap-3">
                        <svg class="w-6 h-6" viewBox="0 0 54 33" fill="currentColor"><path fill="#38bdf8" d="M27 0c-7.2 0-11.7 3.6-13.5 10.8 2.7-3.6 5.85-4.95 9.45-4.05 2.054.514 3.522 2.004 5.147 3.653C30.744 13.09 33.808 16.2 40.5 16.2c7.2 0 11.7-3.6 13.5-10.8-2.7 3.6-5.85 4.95-9.45 4.05-2.054-.514-3.522-2.004-5.147-3.653C36.756 3.11 33.692 0 27 0zM13.5 16.2C6.3 16.2 1.8 19.8 0 27c2.7-3.6 5.85-4.95 9.45-4.05 2.054.514 3.522 2.004 5.147 3.653C17.244 29.29 20.308 32.4 27 32.4c7.2 0 11.7-3.6 13.5-10.8-2.7 3.6-5.85 4.95-9.45 4.05-2.054-.514-3.522-2.004-5.147-3.653C23.256 19.31 20.192 16.2 13.5 16.2z"/></svg>
                        <span>Tailwind</span>
                    </div>
                    <div class="card px-6 py-4 rounded-xl flex items-center gap-3">
                        <i class="fas fa-font text-purple-400 text-2xl"></i>
                        <span>Font Awesome</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="py-24 px-4">
            <div class="max-w-4xl mx-auto text-center">
                <div class="animated-gradient p-1 rounded-3xl">
                    <div class="card p-12 md:p-16 rounded-3xl">
                        <div class="text-5xl mb-6 animate-heartbeat">üöÄ</div>
                        <h2 class="text-4xl md:text-5xl font-bold mb-4">Ready to Boost Your Productivity?</h2>
                        <p class="text-gray-400 text-lg mb-8">Start using StudentFocus today and transform the way you study!</p>
                        <button onclick="showApp()" class="btn-primary px-12 py-5 rounded-2xl font-bold text-lg animate-glow">
                            Launch App Now <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="py-12 px-4 border-t" style="border-color: var(--border);">
            <div class="max-w-6xl mx-auto">
                <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                    <div class="flex items-center gap-3">
                        <span class="text-2xl">üìö</span>
                        <span class="font-bold gradient-text">StudentFocus</span>
                    </div>
                    <div class="flex items-center gap-6">
                        <a href="https://github.com/SudhirDevOps1/studentfocus" target="_blank" class="text-gray-400 hover:text-white transition">
                            <i class="fab fa-github text-xl"></i>
                        </a>
                    </div>
                    <div class="text-center md:text-right">
                        <p class="text-gray-400">Made with <span class="text-red-500 animate-heartbeat inline-block">‚ù§Ô∏è</span> by <a href="https://github.com/SudhirDevOps1" target="_blank" class="text-purple-400 hover:underline">SudhirDevOps1</a></p>
                        <p class="text-gray-500 text-sm mt-1">StudentFocus ¬© 2026</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- ==================== MAIN APP ==================== -->
    <div id="main-app" class="hidden min-h-screen relative z-10">
        <!-- Top Bar -->
        <header class="sticky top-0 z-50 glass border-b" style="border-color: var(--border);">
            <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <button onclick="showLanding()" class="p-2 hover:bg-white/10 rounded-lg transition tooltip" data-tooltip="Back to Home">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <span class="text-2xl">üìö</span>
                    <span class="text-lg font-bold gradient-text hidden sm:block">StudentFocus</span>
                </div>
                <div class="flex items-center gap-3">
                    <div class="hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-lg bg-orange-500/20 text-orange-400">
                        <span class="animate-pulse">üî•</span>
                        <span id="streak-display" class="font-bold">0</span>
                        <span class="text-sm">day streak</span>
                    </div>
                    <button onclick="toggleTheme()" class="p-2.5 rounded-xl hover:bg-white/10 transition tooltip" data-tooltip="Toggle Theme">
                        <i class="fas fa-moon text-lg" id="theme-icon-app"></i>
                    </button>
                    <button onclick="startFocusMode()" class="btn-primary px-4 py-2 rounded-xl text-sm font-medium flex items-center gap-2">
                        <i class="fas fa-crosshairs"></i>
                        <span class="hidden sm:inline">Focus Mode</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Tabs -->
        <div class="sticky top-16 z-40 glass border-b overflow-x-auto" style="border-color: var(--border);">
            <div class="max-w-7xl mx-auto px-4 py-3 flex gap-2">
                <button class="tab-btn active px-5 py-2.5 rounded-xl font-medium whitespace-nowrap transition flex items-center gap-2" data-tab="tasks">
                    <i class="fas fa-tasks"></i> <span class="hidden sm:inline">Tasks</span>
                </button>
                <button class="tab-btn px-5 py-2.5 rounded-xl font-medium whitespace-nowrap transition flex items-center gap-2" data-tab="pomodoro">
                    <i class="fas fa-clock"></i> <span class="hidden sm:inline">Pomodoro</span>
                </button>
                <button class="tab-btn px-5 py-2.5 rounded-xl font-medium whitespace-nowrap transition flex items-center gap-2" data-tab="grades">
                    <i class="fas fa-graduation-cap"></i> <span class="hidden sm:inline">Grades</span>
                </button>
                <button class="tab-btn px-5 py-2.5 rounded-xl font-medium whitespace-nowrap transition flex items-center gap-2" data-tab="analytics">
                    <i class="fas fa-chart-bar"></i> <span class="hidden sm:inline">Analytics</span>
                </button>
                <button class="tab-btn px-5 py-2.5 rounded-xl font-medium whitespace-nowrap transition flex items-center gap-2" data-tab="notes">
                    <i class="fas fa-sticky-note"></i> <span class="hidden sm:inline">Notes</span>
                </button>
                <button class="tab-btn px-5 py-2.5 rounded-xl font-medium whitespace-nowrap transition flex items-center gap-2" data-tab="achievements">
                    <i class="fas fa-trophy"></i> <span class="hidden sm:inline">Achievements</span>
                </button>
            </div>
        </div>

        <!-- Tab Content -->
        <main class="max-w-7xl mx-auto px-4 py-8">
            <!-- ========== TASKS TAB ========== -->
            <div id="tasks-tab" class="tab-content animate-fade">
                <!-- Controls -->
                <div class="flex flex-col lg:flex-row gap-4 mb-8">
                    <div class="flex-1 relative">
                        <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                        <input type="text" id="task-search" placeholder="Search tasks..." 
                            class="w-full pl-12 pr-4 py-3.5 rounded-xl border bg-transparent" 
                            style="border-color: var(--border);">
                    </div>
                    <div class="flex flex-wrap gap-3">
                        <select id="task-filter" class="px-4 py-3.5 rounded-xl border bg-transparent cursor-pointer" style="background: var(--card); border-color: var(--border);">
                            <option value="all">üìã All Tasks</option>
                            <option value="pending">‚è≥ Pending</option>
                            <option value="completed">‚úÖ Completed</option>
                            <option value="overdue">‚ö†Ô∏è Overdue</option>
                        </select>
                        <select id="task-sort" class="px-4 py-3.5 rounded-xl border bg-transparent cursor-pointer" style="background: var(--card); border-color: var(--border);">
                            <option value="date">üìÖ Sort by Date</option>
                            <option value="priority">üéØ Sort by Priority</option>
                            <option value="created">üïê Sort by Created</option>
                        </select>
                        <button onclick="exportTasks()" class="px-4 py-3.5 rounded-xl border hover:bg-white/10 transition tooltip flex items-center gap-2" style="border-color: var(--border);" data-tooltip="Export to CSV">
                            <i class="fas fa-download"></i>
                            <span class="hidden md:inline">Export</span>
                        </button>
                        <button onclick="openTaskModal()" class="btn-primary px-6 py-3.5 rounded-xl font-medium flex items-center gap-2">
                            <i class="fas fa-plus"></i> Add Task
                        </button>
                    </div>
                </div>

                <!-- Task List -->
                <div id="tasks-list" class="grid gap-4"></div>
                
                <!-- Empty State -->
                <div id="no-tasks" class="hidden empty-state text-center py-20">
                    <div class="text-8xl mb-6 empty-state-icon">üìã</div>
                    <h3 class="text-2xl font-bold mb-3">No tasks yet</h3>
                    <p class="text-gray-400 mb-6 max-w-md mx-auto">Add your first task to start organizing your study schedule!</p>
                    <button onclick="openTaskModal()" class="btn-primary px-8 py-4 rounded-xl font-medium inline-flex items-center gap-2">
                        <i class="fas fa-plus"></i> Create First Task
                    </button>
                </div>
            </div>

            <!-- ========== POMODORO TAB ========== -->
            <div id="pomodoro-tab" class="tab-content hidden">
                <div class="max-w-2xl mx-auto">
                    <!-- Timer Card -->
                    <div class="card p-10 rounded-3xl text-center mb-8 animate-glow">
                        <!-- Mode Buttons -->
                        <div class="flex justify-center gap-3 mb-8">
                            <button class="pomo-mode-btn active px-5 py-2.5 rounded-xl font-medium transition" data-mode="focus">üéØ Focus</button>
                            <button class="pomo-mode-btn px-5 py-2.5 rounded-xl font-medium transition" data-mode="short">‚òï Short Break</button>
                            <button class="pomo-mode-btn px-5 py-2.5 rounded-xl font-medium transition" data-mode="long">üå¥ Long Break</button>
                        </div>
                        
                        <!-- Timer Display -->
                        <div class="relative inline-block mb-8 timer-pulse" id="timer-container">
                            <svg class="progress-ring w-72 h-72">
                                <circle cx="144" cy="144" r="130" stroke-width="12" fill="none" stroke="rgba(255,255,255,0.05)"/>
                                <circle id="progress-circle" cx="144" cy="144" r="130" stroke-width="12" fill="none" 
                                    stroke="url(#timer-gradient)" stroke-linecap="round"
                                    stroke-dasharray="817" stroke-dashoffset="0"/>
                                <defs>
                                    <linearGradient id="timer-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" stop-color="#6C63FF"/>
                                        <stop offset="100%" stop-color="#4ECDC4"/>
                                    </linearGradient>
                                </defs>
                            </svg>
                            <div class="absolute inset-0 flex flex-col items-center justify-center">
                                <div id="timer-display" class="text-7xl font-black gradient-text">25:00</div>
                                <div id="timer-label" class="text-gray-400 mt-2">Focus Time</div>
                            </div>
                        </div>

                        <!-- Controls -->
                        <div class="flex justify-center gap-4 mb-8">
                            <button onclick="toggleTimer()" id="timer-btn" class="btn-primary w-20 h-20 rounded-full text-3xl flex items-center justify-center">
                                <i class="fas fa-play"></i>
                            </button>
                            <button onclick="resetTimer()" class="w-20 h-20 rounded-full text-3xl border hover:bg-white/10 transition flex items-center justify-center" style="border-color: var(--border);">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>

                        <!-- Stats -->
                        <div class="flex justify-center gap-8 text-center">
                            <div>
                                <div class="text-3xl font-bold gradient-text" id="sessions-today">0</div>
                                <div class="text-sm text-gray-400">Sessions Today</div>
                            </div>
                            <div>
                                <div class="text-3xl font-bold gradient-text" id="total-focus-time">0h</div>
                                <div class="text-sm text-gray-400">Total Focus</div>
                            </div>
                        </div>
                    </div>

                    <!-- Settings Card -->
                    <div class="card p-6 rounded-2xl mb-6">
                        <h3 class="font-bold mb-6 flex items-center gap-2"><i class="fas fa-cog text-purple-400"></i> Timer Settings</h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div>
                                <label class="text-sm text-gray-400 block mb-2">Focus (min)</label>
                                <input type="number" id="focus-time" value="25" min="1" max="60" 
                                    class="w-full p-3 rounded-xl border text-center font-bold" 
                                    style="background: var(--bg); border-color: var(--border);">
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-2">Short Break</label>
                                <input type="number" id="short-break" value="5" min="1" max="30" 
                                    class="w-full p-3 rounded-xl border text-center font-bold" 
                                    style="background: var(--bg); border-color: var(--border);">
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-2">Long Break</label>
                                <input type="number" id="long-break" value="15" min="1" max="60" 
                                    class="w-full p-3 rounded-xl border text-center font-bold" 
                                    style="background: var(--bg); border-color: var(--border);">
                            </div>
                        </div>
                    </div>

                    <!-- Ambient Sounds Card -->
                    <div class="card p-6 rounded-2xl">
                        <h3 class="font-bold mb-6 flex items-center gap-2"><i class="fas fa-music text-purple-400"></i> Ambient Sounds</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <button onclick="playSound('rain')" class="sound-btn p-5 rounded-2xl border transition flex flex-col items-center gap-2" style="border-color: var(--border);" data-sound="rain">
                                <span class="text-4xl">üåßÔ∏è</span>
                                <span class="font-medium">Rain</span>
                            </button>
                            <button onclick="playSound('forest')" class="sound-btn p-5 rounded-2xl border transition flex flex-col items-center gap-2" style="border-color: var(--border);" data-sound="forest">
                                <span class="text-4xl">üå≤</span>
                                <span class="font-medium">Forest</span>
                            </button>
                            <button onclick="playSound('cafe')" class="sound-btn p-5 rounded-2xl border transition flex flex-col items-center gap-2" style="border-color: var(--border);" data-sound="cafe">
                                <span class="text-4xl">‚òï</span>
                                <span class="font-medium">Caf√©</span>
                            </button>
                            <button onclick="playSound('waves')" class="sound-btn p-5 rounded-2xl border transition flex flex-col items-center gap-2" style="border-color: var(--border);" data-sound="waves">
                                <span class="text-4xl">üåä</span>
                                <span class="font-medium">Waves</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ========== GRADES TAB ========== -->
            <div id="grades-tab" class="tab-content hidden">
                <div class="grid lg:grid-cols-3 gap-8">
                    <!-- Grade List -->
                    <div class="lg:col-span-2">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold flex items-center gap-2">
                                <span class="text-3xl">üìä</span> Grade Tracker
                            </h2>
                            <button onclick="openGradeModal()" class="btn-primary px-5 py-2.5 rounded-xl font-medium flex items-center gap-2">
                                <i class="fas fa-plus"></i> Add Grade
                            </button>
                        </div>
                        <div id="grades-list" class="space-y-4"></div>
                        <div id="no-grades" class="hidden empty-state text-center py-16 card rounded-2xl">
                            <div class="text-7xl mb-4 empty-state-icon">üìö</div>
                            <h3 class="text-xl font-bold mb-2">No grades yet</h3>
                            <p class="text-gray-400">Add your first grade to track your GPA!</p>
                        </div>
                    </div>
                    
                    <!-- GPA Card -->
                    <div>
                        <div class="card p-8 rounded-3xl text-center sticky top-40">
                            <div class="w-20 h-20 rounded-2xl gradient-bg flex items-center justify-center text-4xl mx-auto mb-4">üéì</div>
                            <h3 class="font-bold mb-2 text-gray-400">Your GPA</h3>
                            <div class="text-7xl font-black gradient-text mb-2" id="gpa-display">0.00</div>
                            <div class="text-gray-400 mb-6">out of 4.0</div>
                            
                            <div class="h-3 rounded-full bg-gray-700 overflow-hidden mb-6">
                                <div id="gpa-bar" class="h-full gradient-bg transition-all duration-500 progress-animated" style="width: 0%"></div>
                            </div>
                            
                            <div class="space-y-3 text-left">
                                <div class="flex justify-between p-3 rounded-lg bg-white/5">
                                    <span class="text-gray-400">Total Credits</span>
                                    <span class="font-bold" id="total-credits">0</span>
                                </div>
                                <div class="flex justify-between p-3 rounded-lg bg-white/5">
                                    <span class="text-gray-400">Average Score</span>
                                    <span class="font-bold" id="avg-score">0%</span>
                                </div>
                                <div class="flex justify-between p-3 rounded-lg bg-white/5">
                                    <span class="text-gray-400">Total Courses</span>
                                    <span class="font-bold" id="total-courses">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ========== ANALYTICS TAB ========== -->
            <div id="analytics-tab" class="tab-content hidden">
                <!-- Stats Cards -->
                <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                    <div class="card p-6 rounded-2xl">
                        <div class="flex items-center gap-4">
                            <div class="w-14 h-14 rounded-xl bg-blue-500/20 flex items-center justify-center text-2xl">‚è±Ô∏è</div>
                            <div>
                                <div class="text-sm text-gray-400">Today's Study</div>
                                <div class="text-2xl font-bold" id="today-time">0h 0m</div>
                            </div>
                        </div>
                    </div>
                    <div class="card p-6 rounded-2xl">
                        <div class="flex items-center gap-4">
                            <div class="w-14 h-14 rounded-xl bg-orange-500/20 flex items-center justify-center text-2xl">üî•</div>
                            <div>
                                <div class="text-sm text-gray-400">Current Streak</div>
                                <div class="text-2xl font-bold"><span id="current-streak">0</span> days</div>
                            </div>
                        </div>
                    </div>
                    <div class="card p-6 rounded-2xl">
                        <div class="flex items-center gap-4">
                            <div class="w-14 h-14 rounded-xl bg-purple-500/20 flex items-center justify-center text-2xl">üèÜ</div>
                            <div>
                                <div class="text-sm text-gray-400">Max Record</div>
                                <div class="text-2xl font-bold" id="max-record">0h 0m</div>
                            </div>
                        </div>
                    </div>
                    <div class="card p-6 rounded-2xl">
                        <div class="flex items-center gap-4">
                            <div class="w-14 h-14 rounded-xl bg-green-500/20 flex items-center justify-center text-2xl">‚úÖ</div>
                            <div>
                                <div class="text-sm text-gray-400">Tasks Done</div>
                                <div class="text-2xl font-bold" id="tasks-completed">0</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Daily Goal -->
                <div class="card p-6 rounded-2xl mb-8">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
                        <div>
                            <h3 class="font-bold text-lg flex items-center gap-2">üéØ Daily Goal Progress</h3>
                            <p class="text-sm text-gray-400">Set your daily study target</p>
                        </div>
                        <div class="flex items-center gap-3">
                            <input type="number" id="daily-goal" value="120" min="30" max="480" 
                                class="w-24 p-3 rounded-xl border text-center font-bold" 
                                style="background: var(--bg); border-color: var(--border);">
                            <span class="text-gray-400">minutes</span>
                        </div>
                    </div>
                    <div class="h-6 rounded-full bg-gray-700 overflow-hidden mb-3">
                        <div id="goal-progress" class="h-full gradient-bg transition-all duration-500 progress-animated" style="width: 0%"></div>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-400"><span id="goal-current">0</span> minutes studied</span>
                        <span class="text-gray-400">Goal: <span id="goal-target">120</span> min</span>
                    </div>
                </div>

                <!-- Weekly Chart -->
                <div class="card p-8 rounded-2xl">
                    <h3 class="font-bold text-lg mb-8 flex items-center gap-2">üìà Weekly Study Chart</h3>
                    <div class="flex items-end justify-around h-56 gap-3">
                        <div class="flex flex-col items-center flex-1">
                            <div class="bar w-full gradient-bg rounded-t-xl relative" style="height: 5%; min-height: 8px;" data-day="0" data-value="0m"></div>
                            <span class="text-sm text-gray-400 mt-3 font-medium">Mon</span>
                        </div>
                        <div class="flex flex-col items-center flex-1">
                            <div class="bar w-full gradient-bg rounded-t-xl relative" style="height: 5%; min-height: 8px;" data-day="1" data-value="0m"></div>
                            <span class="text-sm text-gray-400 mt-3 font-medium">Tue</span>
                        </div>
                        <div class="flex flex-col items-center flex-1">
                            <div class="bar w-full gradient-bg rounded-t-xl relative" style="height: 5%; min-height: 8px;" data-day="2" data-value="0m"></div>
                            <span class="text-sm text-gray-400 mt-3 font-medium">Wed</span>
                        </div>
                        <div class="flex flex-col items-center flex-1">
                            <div class="bar w-full gradient-bg rounded-t-xl relative" style="height: 5%; min-height: 8px;" data-day="3" data-value="0m"></div>
                            <span class="text-sm text-gray-400 mt-3 font-medium">Thu</span>
                        </div>
                        <div class="flex flex-col items-center flex-1">
                            <div class="bar w-full gradient-bg rounded-t-xl relative" style="height: 5%; min-height: 8px;" data-day="4" data-value="0m"></div>
                            <span class="text-sm text-gray-400 mt-3 font-medium">Fri</span>
                        </div>
                        <div class="flex flex-col items-center flex-1">
                            <div class="bar w-full gradient-bg rounded-t-xl relative" style="height: 5%; min-height: 8px;" data-day="5" data-value="0m"></div>
                            <span class="text-sm text-gray-400 mt-3 font-medium">Sat</span>
                        </div>
                        <div class="flex flex-col items-center flex-1">
                            <div class="bar w-full gradient-bg rounded-t-xl relative" style="height: 5%; min-height: 8px;" data-day="6" data-value="0m"></div>
                            <span class="text-sm text-gray-400 mt-3 font-medium">Sun</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ========== NOTES TAB ========== -->
            <div id="notes-tab" class="tab-content hidden">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold flex items-center gap-2">
                        <span class="text-3xl">üìù</span> Quick Notes
                    </h2>
                    <button onclick="openNoteModal()" class="btn-primary px-5 py-2.5 rounded-xl font-medium flex items-center gap-2">
                        <i class="fas fa-plus"></i> Add Note
                    </button>
                </div>
                <div id="notes-grid" class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
                <div id="no-notes" class="hidden empty-state text-center py-20">
                    <div class="text-8xl mb-6 empty-state-icon">üìù</div>
                    <h3 class="text-2xl font-bold mb-3">No notes yet</h3>
                    <p class="text-gray-400 mb-6">Create colorful notes for quick reminders!</p>
                    <button onclick="openNoteModal()" class="btn-primary px-8 py-4 rounded-xl font-medium inline-flex items-center gap-2">
                        <i class="fas fa-plus"></i> Create First Note
                    </button>
                </div>
            </div>

            <!-- ========== ACHIEVEMENTS TAB ========== -->
            <div id="achievements-tab" class="tab-content hidden">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-2 flex items-center gap-2">
                        <span class="text-3xl">üèÜ</span> Achievements
                    </h2>
                    <p class="text-gray-400">Unlock badges by completing milestones! <span id="achievements-progress" class="text-purple-400 font-bold">0/16</span> unlocked</p>
                </div>
                <div class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="achievements-grid"></div>
            </div>
        </main>
    </div>

    <!-- ==================== MODALS ==================== -->
    
    <!-- Task Modal -->
    <div id="task-modal" class="modal">
        <div class="modal-content card p-8 rounded-3xl w-full max-w-lg mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold" id="task-modal-title">Add New Task</h3>
                <button onclick="closeTaskModal()" class="p-2 hover:bg-white/10 rounded-xl transition">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form id="task-form" class="space-y-5">
                <input type="hidden" id="task-id">
                <div>
                    <label class="text-sm text-gray-400 mb-2 block">Title *</label>
                    <input type="text" id="task-title" required 
                        class="w-full p-4 rounded-xl border" 
                        style="background: var(--bg); border-color: var(--border);" 
                        placeholder="Enter task title">
                </div>
                <div>
                    <label class="text-sm text-gray-400 mb-2 block">Subject</label>
                    <input type="text" id="task-subject" 
                        class="w-full p-4 rounded-xl border" 
                        style="background: var(--bg); border-color: var(--border);" 
                        placeholder="e.g., Mathematics">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-sm text-gray-400 mb-2 block">Category</label>
                        <select id="task-category" class="w-full p-4 rounded-xl border cursor-pointer" style="background: var(--bg); border-color: var(--border);">
                            <option value="Homework">üìö Homework</option>
                            <option value="Project">üîß Project</option>
                            <option value="Exam">üìù Exam</option>
                            <option value="Reading">üìñ Reading</option>
                            <option value="Personal">üë§ Personal</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-sm text-gray-400 mb-2 block">Priority</label>
                        <select id="task-priority" class="w-full p-4 rounded-xl border cursor-pointer" style="background: var(--bg); border-color: var(--border);">
                            <option value="Low">üü¢ Low</option>
                            <option value="Medium">üü° Medium</option>
                            <option value="High">üî¥ High</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="text-sm text-gray-400 mb-2 block">Due Date</label>
                    <input type="date" id="task-due" 
                        class="w-full p-4 rounded-xl border" 
                        style="background: var(--bg); border-color: var(--border);">
                </div>
                <button type="submit" class="btn-primary w-full py-4 rounded-xl font-bold text-lg">
                    <i class="fas fa-save mr-2"></i>Save Task
                </button>
            </form>
        </div>
    </div>

    <!-- Grade Modal -->
    <div id="grade-modal" class="modal">
        <div class="modal-content card p-8 rounded-3xl w-full max-w-lg mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Add Grade</h3>
                <button onclick="closeGradeModal()" class="p-2 hover:bg-white/10 rounded-xl transition">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form id="grade-form" class="space-y-5">
                <div>
                    <label class="text-sm text-gray-400 mb-2 block">Subject *</label>
                    <input type="text" id="grade-subject" required 
                        class="w-full p-4 rounded-xl border" 
                        style="background: var(--bg); border-color: var(--border);" 
                        placeholder="e.g., Calculus">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-sm text-gray-400 mb-2 block">Score (0-100) *</label>
                        <input type="number" id="grade-score" required min="0" max="100" 
                            class="w-full p-4 rounded-xl border" 
                            style="background: var(--bg); border-color: var(--border);" 
                            placeholder="85">
                    </div>
                    <div>
                        <label class="text-sm text-gray-400 mb-2 block">Credits *</label>
                        <input type="number" id="grade-credits" required min="1" max="10" value="3" 
                            class="w-full p-4 rounded-xl border" 
                            style="background: var(--bg); border-color: var(--border);">
                    </div>
                </div>
                <div>
                    <label class="text-sm text-gray-400 mb-2 block">Type</label>
                    <select id="grade-type" class="w-full p-4 rounded-xl border cursor-pointer" style="background: var(--bg); border-color: var(--border);">
                        <option value="Exam">üìù Exam</option>
                        <option value="Quiz">‚ùì Quiz</option>
                        <option value="Assignment">üìã Assignment</option>
                        <option value="Project">üîß Project</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary w-full py-4 rounded-xl font-bold text-lg">
                    <i class="fas fa-save mr-2"></i>Save Grade
                </button>
            </form>
        </div>
    </div>

    <!-- Note Modal -->
    <div id="note-modal" class="modal">
        <div class="modal-content card p-8 rounded-3xl w-full max-w-lg mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Add Note</h3>
                <button onclick="closeNoteModal()" class="p-2 hover:bg-white/10 rounded-xl transition">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form id="note-form" class="space-y-5">
                <div>
                    <label class="text-sm text-gray-400 mb-2 block">Title</label>
                    <input type="text" id="note-title" 
                        class="w-full p-4 rounded-xl border" 
                        style="background: var(--bg); border-color: var(--border);" 
                        placeholder="Note title (optional)">
                </div>
                <div>
                    <label class="text-sm text-gray-400 mb-2 block">Content *</label>
                    <textarea id="note-content" required rows="4" 
                        class="w-full p-4 rounded-xl border resize-none" 
                        style="background: var(--bg); border-color: var(--border);" 
                        placeholder="Write your note..."></textarea>
                </div>
                <div>
                    <label class="text-sm text-gray-400 mb-3 block">Color</label>
                    <div class="flex gap-3">
                        <button type="button" class="color-btn w-12 h-12 rounded-xl note-yellow border-4 border-transparent transition hover:scale-110" data-color="yellow"></button>
                        <button type="button" class="color-btn w-12 h-12 rounded-xl note-green border-4 border-transparent transition hover:scale-110" data-color="green"></button>
                        <button type="button" class="color-btn w-12 h-12 rounded-xl note-blue border-4 border-transparent transition hover:scale-110" data-color="blue"></button>
                        <button type="button" class="color-btn w-12 h-12 rounded-xl note-pink border-4 border-transparent transition hover:scale-110" data-color="pink"></button>
                        <button type="button" class="color-btn w-12 h-12 rounded-xl note-purple border-4 border-transparent transition hover:scale-110" data-color="purple"></button>
                    </div>
                </div>
                <button type="submit" class="btn-primary w-full py-4 rounded-xl font-bold text-lg">
                    <i class="fas fa-save mr-2"></i>Save Note
                </button>
            </form>
        </div>
    </div>

    <!-- Focus Mode Overlay -->
    <div id="focus-overlay" class="focus-overlay">
        <button onclick="exitFocusMode()" class="absolute top-8 right-8 text-gray-400 hover:text-white transition p-3 hover:bg-white/10 rounded-xl">
            <i class="fas fa-times text-2xl"></i>
        </button>
        <div class="text-center z-10 px-4">
            <div id="focus-timer" class="text-8xl md:text-9xl font-black gradient-text mb-8 animate-pulse-custom">25:00</div>
            <div id="focus-quote" class="text-xl md:text-2xl text-gray-400 mb-12 max-w-2xl mx-auto italic">"The secret of getting ahead is getting started."</div>
            <div class="flex gap-4 justify-center">
                <button onclick="toggleTimer()" id="focus-btn" class="btn-primary px-10 py-5 rounded-2xl font-bold text-lg animate-glow">
                    <i class="fas fa-play mr-3"></i>Start Focus
                </button>
                <button onclick="exitFocusMode()" class="btn-secondary px-10 py-5 rounded-2xl font-bold text-lg">
                    <i class="fas fa-sign-out-alt mr-2"></i>Exit
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-4 right-4 z-50 flex flex-col gap-3"></div>

    <!-- ==================== JAVASCRIPT ==================== -->
    <script>
        // ==================== DATA STORAGE ====================
        let tasks = JSON.parse(localStorage.getItem('sf_tasks')) || [];
        let grades = JSON.parse(localStorage.getItem('sf_grades')) || [];
        let notes = JSON.parse(localStorage.getItem('sf_notes')) || [];
        let achievements = JSON.parse(localStorage.getItem('sf_achievements')) || [];
        let studyData = JSON.parse(localStorage.getItem('sf_studyData')) || {
            today: 0, weekly: [0, 0, 0, 0, 0, 0, 0], streak: 0, maxRecord: 0, lastStudyDate: null
        };
        let pomodoroStats = JSON.parse(localStorage.getItem('sf_pomodoroStats')) || {
            todayCount: 0, totalMinutes: 0, lastSession: null
        };

        // Timer State
        let timerInterval = null;
        let timerRunning = false;
        let currentMode = 'focus';
        let timeLeft = 25 * 60;
        let totalTime = 25 * 60;
        let selectedNoteColor = 'yellow';
        let currentSound = null;
        let currentSoundName = null;

        // Motivational Quotes
        const quotes = [
            '"The secret of getting ahead is getting started." ‚Äî Mark Twain',
            '"Success is the sum of small efforts repeated day in and day out." ‚Äî Robert Collier',
            '"The only way to do great work is to love what you do." ‚Äî Steve Jobs',
            '"Don\'t watch the clock; do what it does. Keep going." ‚Äî Sam Levenson',
            '"Believe you can and you\'re halfway there." ‚Äî Theodore Roosevelt',
            '"The future belongs to those who believe in the beauty of their dreams." ‚Äî Eleanor Roosevelt',
            '"Education is the passport to the future." ‚Äî Malcolm X',
            '"The expert in anything was once a beginner." ‚Äî Helen Hayes',
            '"It does not matter how slowly you go as long as you do not stop." ‚Äî Confucius',
            '"The beautiful thing about learning is that no one can take it away from you." ‚Äî B.B. King'
        ];

        // Achievements Definition
        const achievementsList = [
            { id: 'first_task', icon: 'üéØ', title: 'First Step', desc: 'Add your first task', condition: () => tasks.length >= 1 },
            { id: 'task_master', icon: 'üìã', title: 'Task Master', desc: 'Complete 10 tasks', condition: () => tasks.filter(t => t.completed).length >= 10 },
            { id: 'task_legend', icon: 'üèÜ', title: 'Task Legend', desc: 'Complete 50 tasks', condition: () => tasks.filter(t => t.completed).length >= 50 },
            { id: 'pomo_starter', icon: 'üçÖ', title: 'Pomodoro Starter', desc: 'Complete 1 pomodoro', condition: () => pomodoroStats.todayCount >= 1 || pomodoroStats.totalMinutes >= 25 },
            { id: 'focus_pro', icon: '‚è∞', title: 'Focus Pro', desc: 'Complete 25 pomodoros', condition: () => Math.floor(pomodoroStats.totalMinutes / 25) >= 25 },
            { id: 'on_fire', icon: 'üî•', title: 'On Fire', desc: '3 day study streak', condition: () => studyData.streak >= 3 },
            { id: 'week_warrior', icon: 'üí™', title: 'Week Warrior', desc: '7 day study streak', condition: () => studyData.streak >= 7 },
            { id: 'monthly_master', icon: 'üåü', title: 'Monthly Master', desc: '30 day study streak', condition: () => studyData.streak >= 30 },
            { id: 'honor_student', icon: 'üìö', title: 'Honor Student', desc: 'Get an A grade (90+)', condition: () => grades.some(g => g.score >= 90) },
            { id: 'deans_list', icon: 'üéì', title: "Dean's List", desc: 'Achieve 3.0+ GPA', condition: () => calculateGPA() >= 3.0 },
            { id: 'perfect_scholar', icon: 'üëë', title: 'Perfect Scholar', desc: 'Achieve 4.0 GPA', condition: () => calculateGPA() >= 4.0 && grades.length > 0 },
            { id: 'early_bird', icon: 'üåÖ', title: 'Early Bird', desc: 'Study before 7 AM', condition: () => achievements.includes('early_bird') },
            { id: 'night_owl', icon: 'ü¶â', title: 'Night Owl', desc: 'Study after 11 PM', condition: () => achievements.includes('night_owl') },
            { id: 'note_taker', icon: 'üìù', title: 'Note Taker', desc: 'Create 10 notes', condition: () => notes.length >= 10 },
            { id: 'dedicated', icon: 'üìñ', title: 'Dedicated', desc: 'Study 2 hours in a day', condition: () => studyData.today >= 120 },
            { id: 'brain_power', icon: 'üß†', title: 'Brain Power', desc: 'Study 5 hours in a day', condition: () => studyData.today >= 300 }
        ];

        // ==================== THEME ====================
        function toggleTheme() {
            document.body.classList.toggle('dark');
            document.body.classList.toggle('light');
            const isDark = document.body.classList.contains('dark');
            document.getElementById('theme-icon').className = isDark ? 'fas fa-moon text-xl' : 'fas fa-sun text-xl';
            const appIcon = document.getElementById('theme-icon-app');
            if (appIcon) appIcon.className = isDark ? 'fas fa-moon text-lg' : 'fas fa-sun text-lg';
            localStorage.setItem('sf_theme', isDark ? 'dark' : 'light');
        }

        // ==================== NAVIGATION ====================
        function showApp() {
            document.getElementById('landing-page').classList.add('hidden');
            document.getElementById('main-app').classList.remove('hidden');
            document.getElementById('main-app').classList.add('animate-fade');
            renderAll();
        }

        function showLanding() {
            document.getElementById('landing-page').classList.remove('hidden');
            document.getElementById('main-app').classList.add('hidden');
        }

        // Tab Switching
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                document.querySelectorAll('.tab-content').forEach(t => {
                    t.classList.add('hidden');
                    t.classList.remove('animate-fade');
                });
                const tab = document.getElementById(`${btn.dataset.tab}-tab`);
                tab.classList.remove('hidden');
                tab.classList.add('animate-fade');
            });
        });

        // ==================== TASKS ====================
        function renderTasks() {
            const list = document.getElementById('tasks-list');
            const noTasks = document.getElementById('no-tasks');
            const search = document.getElementById('task-search').value.toLowerCase();
            const filter = document.getElementById('task-filter').value;
            const sort = document.getElementById('task-sort').value;

            let filtered = [...tasks];
            const today = new Date().toISOString().split('T')[0];

            if (search) filtered = filtered.filter(t => t.title.toLowerCase().includes(search) || t.subject?.toLowerCase().includes(search));
            if (filter === 'pending') filtered = filtered.filter(t => !t.completed);
            if (filter === 'completed') filtered = filtered.filter(t => t.completed);
            if (filter === 'overdue') filtered = filtered.filter(t => !t.completed && t.dueDate && t.dueDate < today);

            if (sort === 'date') filtered.sort((a, b) => (a.dueDate || '9999') > (b.dueDate || '9999') ? 1 : -1);
            else if (sort === 'priority') {
                const order = { High: 0, Medium: 1, Low: 2 };
                filtered.sort((a, b) => order[a.priority] - order[b.priority]);
            } else filtered.sort((a, b) => b.createdAt - a.createdAt);

            if (filtered.length === 0) {
                list.innerHTML = '';
                noTasks.classList.remove('hidden');
                return;
            }

            noTasks.classList.add('hidden');
            list.innerHTML = filtered.map((task, index) => {
                const isOverdue = !task.completed && task.dueDate && task.dueDate < today;
                const daysLeft = task.dueDate ? Math.ceil((new Date(task.dueDate) - new Date()) / (1000 * 60 * 60 * 24)) : null;
                return `
                    <div class="card p-5 rounded-2xl priority-${task.priority.toLowerCase()} ${task.completed ? 'opacity-60' : ''} animate-fade" style="animation-delay: ${index * 0.05}s; opacity: 0;">
                        <div class="flex items-start gap-4">
                            <button onclick="toggleTask('${task.id}')" class="task-checkbox mt-1 w-7 h-7 rounded-full border-2 flex items-center justify-center transition ${task.completed ? 'bg-green-500 border-green-500 completed' : 'border-gray-500 hover:border-purple-500'}">
                                ${task.completed ? '<i class="fas fa-check text-white text-sm"></i>' : ''}
                            </button>
                            <div class="flex-1 min-w-0">
                                <h4 class="font-semibold text-lg ${task.completed ? 'line-through text-gray-500' : ''}">${task.title}</h4>
                                <div class="flex flex-wrap gap-2 mt-3">
                                    ${task.subject ? `<span class="badge badge-primary">${task.subject}</span>` : ''}
                                    <span class="badge" style="background: rgba(255,255,255,0.1);">${task.category}</span>
                                    ${task.dueDate ? `<span class="badge ${isOverdue ? 'badge-danger' : daysLeft <= 2 ? 'badge-warning' : 'badge-success'}">
                                        üìÖ ${isOverdue ? 'Overdue' : daysLeft === 0 ? 'Today' : daysLeft === 1 ? 'Tomorrow' : task.dueDate}
                                    </span>` : ''}
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="editTask('${task.id}')" class="p-2.5 hover:bg-white/10 rounded-xl transition tooltip" data-tooltip="Edit">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="deleteTask('${task.id}')" class="p-2.5 hover:bg-red-500/20 text-red-400 rounded-xl transition tooltip" data-tooltip="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function openTaskModal(task = null) {
            document.getElementById('task-modal').classList.add('active');
            document.getElementById('task-modal-title').textContent = task ? 'Edit Task' : 'Add New Task';
            if (task) {
                document.getElementById('task-id').value = task.id;
                document.getElementById('task-title').value = task.title;
                document.getElementById('task-subject').value = task.subject || '';
                document.getElementById('task-category').value = task.category;
                document.getElementById('task-priority').value = task.priority;
                document.getElementById('task-due').value = task.dueDate || '';
            } else {
                document.getElementById('task-form').reset();
                document.getElementById('task-id').value = '';
            }
        }

        function closeTaskModal() { document.getElementById('task-modal').classList.remove('active'); }
        function editTask(id) { const task = tasks.find(t => t.id === id); if (task) openTaskModal(task); }

        function toggleTask(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                task.completed = !task.completed;
                saveTasks();
                renderTasks();
                updateAnalytics();
                checkAchievements();
                if (task.completed) {
                    showToast('‚úÖ Task completed!', 'success');
                    createConfetti();
                }
            }
        }

        function deleteTask(id) {
            tasks = tasks.filter(t => t.id !== id);
            saveTasks();
            renderTasks();
            showToast('üóëÔ∏è Task deleted', 'info');
        }

        function saveTasks() { localStorage.setItem('sf_tasks', JSON.stringify(tasks)); }

        document.getElementById('task-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const id = document.getElementById('task-id').value;
            const taskData = {
                id: id || Date.now().toString(),
                title: document.getElementById('task-title').value,
                subject: document.getElementById('task-subject').value,
                category: document.getElementById('task-category').value,
                priority: document.getElementById('task-priority').value,
                dueDate: document.getElementById('task-due').value,
                completed: id ? tasks.find(t => t.id === id)?.completed : false,
                createdAt: id ? tasks.find(t => t.id === id)?.createdAt : Date.now()
            };

            if (id) {
                const index = tasks.findIndex(t => t.id === id);
                tasks[index] = taskData;
                showToast('‚úèÔ∏è Task updated!', 'success');
            } else {
                tasks.push(taskData);
                showToast('‚úÖ Task added!', 'success');
            }

            saveTasks();
            renderTasks();
            closeTaskModal();
            checkAchievements();
        });

        function exportTasks() {
            const csv = 'Title,Subject,Category,Priority,Due Date,Completed\n' +
                tasks.map(t => `"${t.title}","${t.subject || ''}","${t.category}","${t.priority}","${t.dueDate || ''}","${t.completed}"`).join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'studentfocus_tasks.csv';
            a.click();
            showToast('üì• Tasks exported to CSV!', 'success');
        }

        document.getElementById('task-search').addEventListener('input', renderTasks);
        document.getElementById('task-filter').addEventListener('change', renderTasks);
        document.getElementById('task-sort').addEventListener('change', renderTasks);

        // ==================== POMODORO ====================
        function updateTimerDisplay() {
            const mins = Math.floor(timeLeft / 60);
            const secs = timeLeft % 60;
            const display = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            document.getElementById('timer-display').textContent = display;
            document.getElementById('focus-timer').textContent = display;

            const progress = (totalTime - timeLeft) / totalTime;
            const circumference = 2 * Math.PI * 130;
            const offset = circumference - (circumference * progress);
            document.getElementById('progress-circle').style.strokeDasharray = circumference;
            document.getElementById('progress-circle').style.strokeDashoffset = offset;
        }

        function toggleTimer() {
            if (timerRunning) pauseTimer();
            else startTimer();
        }

        function startTimer() {
            timerRunning = true;
            document.getElementById('timer-btn').innerHTML = '<i class="fas fa-pause"></i>';
            document.getElementById('focus-btn').innerHTML = '<i class="fas fa-pause mr-3"></i>Pause';
            document.getElementById('timer-container').classList.add('running');

            const hour = new Date().getHours();
            if (hour < 7 && !achievements.includes('early_bird')) {
                achievements.push('early_bird');
                saveAchievements();
                showToast('üåÖ Early Bird achievement unlocked!', 'success');
            }
            if (hour >= 23 && !achievements.includes('night_owl')) {
                achievements.push('night_owl');
                saveAchievements();
                showToast('ü¶â Night Owl achievement unlocked!', 'success');
            }

            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();

                if (currentMode === 'focus') {
                    studyData.today++;
                    pomodoroStats.totalMinutes++;
                    saveStudyData();
                    savePomodoroStats();
                    if (studyData.today % 60 === 0) updateAnalytics();
                }

                if (timeLeft <= 0) completeSession();
            }, 1000);
        }

        function pauseTimer() {
            timerRunning = false;
            clearInterval(timerInterval);
            document.getElementById('timer-btn').innerHTML = '<i class="fas fa-play"></i>';
            document.getElementById('focus-btn').innerHTML = '<i class="fas fa-play mr-3"></i>Resume';
            document.getElementById('timer-container').classList.remove('running');
        }

        function resetTimer() {
            pauseTimer();
            const focusTime = parseInt(document.getElementById('focus-time').value) || 25;
            const shortBreak = parseInt(document.getElementById('short-break').value) || 5;
            const longBreak = parseInt(document.getElementById('long-break').value) || 15;

            if (currentMode === 'focus') timeLeft = focusTime * 60;
            else if (currentMode === 'short') timeLeft = shortBreak * 60;
            else timeLeft = longBreak * 60;

            totalTime = timeLeft;
            updateTimerDisplay();
        }

        function completeSession() {
            pauseTimer();
            playNotificationSound();

            if (currentMode === 'focus') {
                pomodoroStats.todayCount++;
                savePomodoroStats();
                updateSessionDisplay();
                showToast('üçÖ Focus session complete! Take a break.', 'success');
                createConfetti();
                switchMode(pomodoroStats.todayCount % 4 === 0 ? 'long' : 'short');
            } else {
                showToast('‚òï Break over! Ready to focus?', 'info');
                switchMode('focus');
            }

            checkAchievements();
            updateAnalytics();
        }

        function switchMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.pomo-mode-btn').forEach(b => b.classList.remove('active'));
            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
            const labels = { focus: 'Focus Time', short: 'Short Break', long: 'Long Break' };
            document.getElementById('timer-label').textContent = labels[mode];
            resetTimer();
        }

        document.querySelectorAll('.pomo-mode-btn').forEach(btn => {
            btn.addEventListener('click', () => switchMode(btn.dataset.mode));
        });

        ['focus-time', 'short-break', 'long-break'].forEach(id => {
            document.getElementById(id).addEventListener('change', resetTimer);
        });

        function updateSessionDisplay() {
            document.getElementById('sessions-today').textContent = pomodoroStats.todayCount;
            const hours = Math.floor(pomodoroStats.totalMinutes / 60);
            document.getElementById('total-focus-time').textContent = `${hours}h`;
        }

        function playNotificationSound() {
            try {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();
                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                oscillator.start(audioCtx.currentTime);
                oscillator.stop(audioCtx.currentTime + 0.5);
            } catch (e) {}
        }

        // Ambient Sounds
        const soundUrls = {
            rain: 'https://assets.mixkit.co/active_storage/sfx/2515/2515-preview.mp3',
            forest: 'https://assets.mixkit.co/active_storage/sfx/2433/2433-preview.mp3',
            cafe: 'https://assets.mixkit.co/active_storage/sfx/2461/2461-preview.mp3',
            waves: 'https://assets.mixkit.co/active_storage/sfx/2432/2432-preview.mp3'
        };

        function playSound(sound) {
            document.querySelectorAll('.sound-btn').forEach(b => b.classList.remove('active'));

            if (currentSound && currentSoundName === sound) {
                currentSound.pause();
                currentSound = null;
                currentSoundName = null;
                showToast('üîá Sound stopped', 'info');
                return;
            }

            if (currentSound) {
                currentSound.pause();
            }

            document.querySelector(`[data-sound="${sound}"]`).classList.add('active');
            currentSound = new Audio(soundUrls[sound]);
            currentSound.loop = true;
            currentSound.volume = 0.3;
            currentSoundName = sound;
            currentSound.play().catch(() => showToast('üîá Enable audio to play sounds', 'info'));
            showToast(`üéµ Playing ${sound} sounds`, 'success');
        }

        // ==================== GRADES ====================
        function renderGrades() {
            const list = document.getElementById('grades-list');
            const noGrades = document.getElementById('no-grades');

            if (grades.length === 0) {
                list.innerHTML = '';
                noGrades.classList.remove('hidden');
                updateGPADisplay();
                return;
            }

            noGrades.classList.add('hidden');
            list.innerHTML = grades.map((grade, index) => {
                const letter = getLetterGrade(grade.score);
                const letterColor = grade.score >= 90 ? 'text-green-400' : grade.score >= 80 ? 'text-blue-400' : grade.score >= 70 ? 'text-yellow-400' : 'text-red-400';
                return `
                    <div class="card p-5 rounded-2xl flex items-center justify-between animate-fade" style="animation-delay: ${index * 0.05}s; opacity: 0;">
                        <div class="flex items-center gap-4">
                            <div class="w-14 h-14 rounded-2xl gradient-bg flex items-center justify-center font-black text-xl ${letterColor}">${letter}</div>
                            <div>
                                <h4 class="font-semibold text-lg">${grade.subject}</h4>
                                <div class="flex gap-2 mt-1">
                                    <span class="badge" style="background: rgba(255,255,255,0.1);">${grade.type}</span>
                                    <span class="badge badge-primary">${grade.credits} credits</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="text-right">
                                <div class="text-3xl font-bold">${grade.score}%</div>
                                <div class="text-sm text-gray-400">${getGradePoints(grade.score).toFixed(1)} GPA</div>
                            </div>
                            <button onclick="deleteGrade('${grade.id}')" class="p-2.5 hover:bg-red-500/20 text-red-400 rounded-xl transition">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            updateGPADisplay();
        }

        function getLetterGrade(score) {
            if (score >= 90) return 'A';
            if (score >= 80) return 'B';
            if (score >= 70) return 'C';
            if (score >= 60) return 'D';
            return 'F';
        }

        function getGradePoints(score) {
            if (score >= 90) return 4.0;
            if (score >= 80) return 3.0;
            if (score >= 70) return 2.0;
            if (score >= 60) return 1.0;
            return 0.0;
        }

        function calculateGPA() {
            if (grades.length === 0) return 0;
            let totalPoints = 0, totalCredits = 0;
            grades.forEach(g => {
                totalPoints += getGradePoints(g.score) * g.credits;
                totalCredits += g.credits;
            });
            return totalCredits > 0 ? totalPoints / totalCredits : 0;
        }

        function updateGPADisplay() {
            const gpa = calculateGPA();
            const totalCredits = grades.reduce((sum, g) => sum + g.credits, 0);
            const avgScore = grades.length > 0 ? grades.reduce((sum, g) => sum + g.score, 0) / grades.length : 0;

            document.getElementById('gpa-display').textContent = gpa.toFixed(2);
            document.getElementById('gpa-bar').style.width = `${(gpa / 4) * 100}%`;
            document.getElementById('total-credits').textContent = totalCredits;
            document.getElementById('avg-score').textContent = avgScore.toFixed(1) + '%';
            document.getElementById('total-courses').textContent = grades.length;
        }

        function openGradeModal() {
            document.getElementById('grade-modal').classList.add('active');
            document.getElementById('grade-form').reset();
        }

        function closeGradeModal() { document.getElementById('grade-modal').classList.remove('active'); }

        function deleteGrade(id) {
            grades = grades.filter(g => g.id !== id);
            saveGrades();
            renderGrades();
            checkAchievements();
            showToast('üóëÔ∏è Grade deleted', 'info');
        }

        function saveGrades() { localStorage.setItem('sf_grades', JSON.stringify(grades)); }

        document.getElementById('grade-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const grade = {
                id: Date.now().toString(),
                subject: document.getElementById('grade-subject').value,
                score: parseInt(document.getElementById('grade-score').value),
                credits: parseInt(document.getElementById('grade-credits').value),
                type: document.getElementById('grade-type').value
            };
            grades.push(grade);
            saveGrades();
            renderGrades();
            closeGradeModal();
            checkAchievements();
            showToast('üìä Grade added!', 'success');
        });

        // ==================== NOTES ====================
        function renderNotes() {
            const grid = document.getElementById('notes-grid');
            const noNotes = document.getElementById('no-notes');

            if (notes.length === 0) {
                grid.innerHTML = '';
                noNotes.classList.remove('hidden');
                return;
            }

            noNotes.classList.add('hidden');
            grid.innerHTML = notes.map((note, index) => `
                <div class="p-5 rounded-2xl note-${note.color} text-gray-800 relative group shadow-lg hover:shadow-xl transition-all hover:-translate-y-1 animate-fade" style="animation-delay: ${index * 0.05}s; opacity: 0;">
                    <button onclick="deleteNote('${note.id}')" class="absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition p-2 hover:bg-black/10 rounded-lg">
                        <i class="fas fa-times"></i>
                    </button>
                    ${note.title ? `<h4 class="font-bold text-lg mb-2">${note.title}</h4>` : ''}
                    <p class="text-sm leading-relaxed">${note.content}</p>
                    <div class="text-xs text-gray-600 mt-3">${new Date(parseInt(note.id)).toLocaleDateString()}</div>
                </div>
            `).join('');
        }

        function openNoteModal() {
            document.getElementById('note-modal').classList.add('active');
            document.getElementById('note-form').reset();
            selectedNoteColor = 'yellow';
            updateColorSelection();
        }

        function closeNoteModal() { document.getElementById('note-modal').classList.remove('active'); }

        function deleteNote(id) {
            notes = notes.filter(n => n.id !== id);
            saveNotes();
            renderNotes();
            showToast('üóëÔ∏è Note deleted', 'info');
        }

        function saveNotes() { localStorage.setItem('sf_notes', JSON.stringify(notes)); }

        function updateColorSelection() {
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.classList.toggle('border-gray-800', btn.dataset.color === selectedNoteColor);
                btn.classList.toggle('scale-110', btn.dataset.color === selectedNoteColor);
            });
        }

        document.querySelectorAll('.color-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                selectedNoteColor = btn.dataset.color;
                updateColorSelection();
            });
        });

        document.getElementById('note-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const note = {
                id: Date.now().toString(),
                title: document.getElementById('note-title').value,
                content: document.getElementById('note-content').value,
                color: selectedNoteColor
            };
            notes.push(note);
            saveNotes();
            renderNotes();
            closeNoteModal();
            checkAchievements();
            showToast('üìù Note added!', 'success');
        });

        // ==================== ANALYTICS ====================
        function updateAnalytics() {
            const mins = studyData.today;
            const hours = Math.floor(mins / 60);
            const remMins = mins % 60;

            document.getElementById('today-time').textContent = `${hours}h ${remMins}m`;
            document.getElementById('current-streak').textContent = studyData.streak;
            document.getElementById('streak-display').textContent = studyData.streak;

            const maxHours = Math.floor(studyData.maxRecord / 60);
            const maxMins = studyData.maxRecord % 60;
            document.getElementById('max-record').textContent = `${maxHours}h ${maxMins}m`;

            document.getElementById('tasks-completed').textContent = tasks.filter(t => t.completed).length;

            const goal = parseInt(document.getElementById('daily-goal').value) || 120;
            const progress = Math.min((mins / goal) * 100, 100);
            document.getElementById('goal-progress').style.width = `${progress}%`;
            document.getElementById('goal-current').textContent = mins;
            document.getElementById('goal-target').textContent = goal;

            const maxWeek = Math.max(...studyData.weekly, 1);
            document.querySelectorAll('.bar').forEach((bar, i) => {
                const height = (studyData.weekly[i] / maxWeek) * 100;
                bar.style.height = `${Math.max(height, 3)}%`;
                const h = Math.floor(studyData.weekly[i] / 60);
                const m = studyData.weekly[i] % 60;
                bar.setAttribute('data-value', `${h}h ${m}m`);
            });

            if (mins > studyData.maxRecord) {
                studyData.maxRecord = mins;
                saveStudyData();
            }

            updateSessionDisplay();
        }

        function saveStudyData() { localStorage.setItem('sf_studyData', JSON.stringify(studyData)); }
        function savePomodoroStats() { localStorage.setItem('sf_pomodoroStats', JSON.stringify(pomodoroStats)); }

        function checkStreak() {
            const today = new Date().toDateString();
            const lastDate = studyData.lastStudyDate;

            if (lastDate) {
                const last = new Date(lastDate);
                const diff = Math.floor((new Date() - last) / (1000 * 60 * 60 * 24));
                if (diff === 1) studyData.streak++;
                else if (diff > 1) studyData.streak = 1;
            } else {
                studyData.streak = 1;
            }

            studyData.lastStudyDate = today;
            const dayOfWeek = new Date().getDay();
            const adjustedDay = dayOfWeek === 0 ? 6 : dayOfWeek - 1;
            studyData.weekly[adjustedDay] = studyData.today;
            saveStudyData();
        }

        // ==================== ACHIEVEMENTS ====================
        function renderAchievements() {
            const grid = document.getElementById('achievements-grid');
            const unlockedCount = achievementsList.filter(a => a.condition()).length;
            document.getElementById('achievements-progress').textContent = `${unlockedCount}/16`;

            grid.innerHTML = achievementsList.map((ach, index) => {
                const unlocked = ach.condition();
                return `
                    <div class="achievement ${unlocked ? 'unlocked' : ''} card p-6 rounded-2xl text-center animate-fade" style="animation-delay: ${index * 0.05}s; opacity: 0;">
                        <div class="achievement-icon text-5xl mb-4">${ach.icon}</div>
                        <h4 class="font-bold text-lg">${ach.title}</h4>
                        <p class="text-sm text-gray-400 mt-1">${ach.desc}</p>
                        ${unlocked ? '<div class="mt-3 badge badge-success"><i class="fas fa-check-circle mr-1"></i> Unlocked</div>' : '<div class="mt-3 badge" style="background: rgba(255,255,255,0.05);">üîí Locked</div>'}
                    </div>
                `;
            }).join('');
        }

        function checkAchievements() {
            achievementsList.forEach(ach => {
                if (ach.condition() && !achievements.includes(ach.id)) {
                    achievements.push(ach.id);
                    showToast(`üèÜ Achievement Unlocked: ${ach.title}!`, 'success');
                    createConfetti();
                }
            });
            saveAchievements();
            renderAchievements();
        }

        function saveAchievements() { localStorage.setItem('sf_achievements', JSON.stringify(achievements)); }

        // ==================== FOCUS MODE ====================
        function startFocusMode() {
            document.getElementById('focus-overlay').classList.add('active');
            document.getElementById('focus-quote').textContent = quotes[Math.floor(Math.random() * quotes.length)];
            document.body.style.overflow = 'hidden';
        }

        function exitFocusMode() {
            document.getElementById('focus-overlay').classList.remove('active');
            document.body.style.overflow = '';
        }

        // ==================== TOAST ====================
        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            const colors = { success: 'bg-green-500/90', error: 'bg-red-500/90', info: 'bg-blue-500/90' };
            const icons = { success: 'fa-check-circle', error: 'fa-exclamation-circle', info: 'fa-info-circle' };
            toast.className = `toast ${colors[type]} text-white`;
            toast.innerHTML = `<i class="fas ${icons[type]}"></i> ${message}`;
            container.appendChild(toast);
            setTimeout(() => {
                toast.classList.add('hiding');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ==================== CONFETTI ====================
        function createConfetti() {
            const colors = ['#6C63FF', '#4ECDC4', '#f093fb', '#f5576c', '#ffecd2'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti-piece';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = '100vh';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 1500);
            }
        }

        // ==================== KEYBOARD SHORTCUTS ====================
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'n') {
                e.preventDefault();
                openTaskModal();
            }
            if (e.key === 'Escape') {
                closeTaskModal();
                closeGradeModal();
                closeNoteModal();
                exitFocusMode();
            }
            if (e.code === 'Space' && document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA') {
                e.preventDefault();
                toggleTimer();
            }
        });

        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.classList.remove('active');
            });
        });

        // ==================== INITIALIZATION ====================
        function renderAll() {
            renderTasks();
            renderGrades();
            renderNotes();
            renderAchievements();
            updateAnalytics();
            updateTimerDisplay();
            updateSessionDisplay();
            checkAchievements();
        }

        // Load theme
        if (localStorage.getItem('sf_theme') === 'light') {
            document.body.classList.remove('dark');
            document.body.classList.add('light');
            document.getElementById('theme-icon').className = 'fas fa-sun text-xl';
        }

        // Daily reset check
        const today = new Date().toDateString();
        const lastVisit = localStorage.getItem('sf_lastVisit');
        if (lastVisit !== today) {
            studyData.today = 0;
            pomodoroStats.todayCount = 0;
            localStorage.setItem('sf_lastVisit', today);
            checkStreak();
            saveStudyData();
            savePomodoroStats();
        }

        // Initialize
        resetTimer();
        updateColorSelection();

        // Trigger animations on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.animate-fade, .animate-fade-left, .animate-fade-right').forEach(el => {
            observer.observe(el);
        });
    </script>
</body>
</html>
